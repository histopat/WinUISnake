<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="WinUISnake.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:WinUISnake"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="WinUISnake">

    <Window.SystemBackdrop>
        <MicaBackdrop />
    </Window.SystemBackdrop>

    <!-- KÖK: Klavye burada yakalanır -->
    <Grid x:Name="Root"
          RowDefinitions="Auto,*,Auto"
          Padding="10"
          Background="#0f172a"
          IsTabStop="True"
          KeyDown="Root_KeyDown"
          Loaded="Root_Loaded">

        <!-- Renk kaynakları -->
        <Grid.Resources>
            <SolidColorBrush x:Key="HudBg" Color="#1e293b"/>
            <SolidColorBrush x:Key="HudFg" Color="#e2e8f0"/>
            <SolidColorBrush x:Key="HintFg" Color="#94a3b8"/>
            <SolidColorBrush x:Key="GameBg" Color="#0b1220"/>
            <SolidColorBrush x:Key="GridLine" Color="#0f1a2e"/>
            <SolidColorBrush x:Key="FoodBrush" Color="#f59e0b"/>
            <SolidColorBrush x:Key="SnakeHeadBrush" Color="#34d399"/>
            <SolidColorBrush x:Key="SnakeBodyBrush" Color="#10b981"/>
            <SolidColorBrush x:Key="OverTint" Color="#660f172a"/>
            <SolidColorBrush x:Key="OverText" Color="#fca5a5"/>
        </Grid.Resources>

        <!-- HUD -->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="16">
            <Border Background="{StaticResource HudBg}" CornerRadius="6" Padding="6,3">
                <TextBlock x:Name="ScoreText" Foreground="{StaticResource HudFg}" Text="Skor: 0"/>
            </Border>
            <Border Background="{StaticResource HudBg}" CornerRadius="6" Padding="6,3">
                <TextBlock x:Name="SpeedText" Foreground="{StaticResource HudFg}" Text="Hız: 6 fps"/>
            </Border>
        </StackPanel>

        <!-- Oyun alanı + Overlay -->
        <Grid Grid.Row="1"
              x:Name="GameArea"
              Width="400" Height="400"
              HorizontalAlignment="Center" VerticalAlignment="Center"
              IsTabStop="False">

            <!-- Oyun alanı -->
            <Canvas x:Name="GameCanvas"
                    Background="{StaticResource GameBg}"/>

            <!-- Game Over Panel (overlay) -->
            <StackPanel x:Name="GameOverPanel"
                        Visibility="Collapsed"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Background="{StaticResource OverTint}"
                        Padding="20"
                        CornerRadius="8"
                        Spacing="8">
                <TextBlock x:Name="GameOverText"
                           Text="Oyun bitti!"
                           Foreground="{StaticResource OverText}"
                           FontWeight="Bold"
                           FontSize="14"
                           HorizontalAlignment="Center"/>
                <Button x:Name="RestartButton"
                        Content="Yeniden Başlat"
                        Background="#1e293b"
                        Foreground="#e2e8f0"
                        CornerRadius="6"
                        Padding="8,4"
                        Click="RestartButton_Click"/>
            </StackPanel>
        </Grid>
    </Grid>


</Window>
